;*******************************************************************************
;
;	ПЕРЕМЕННЫЕ
;
;*******************************************************************************
    cblock  0x20
	Flags	    ;регистр флагов 
	XYZFcmd	    ;регистр выбора направления движения
	MOVEcmd :2  ;регистр количества шагов
	DIRcmd	    ;регистр выбора направления
	LASERcmd    ;регистр включения лазера
	var :4	    ;регистр временного хранения количества шагов
	buffer :2   ;буфер для промежуточного хранения
	counter	    ;счетчик принятых байт
	work_done   ; сделана ли работа прерывающей программой
	cal	    ;задание на калибровку
	DAC_buffer :2 ;буффер для ЦАП
	DAC_temp :2 ;временный регистр для записи в ЦАП
    endc	    ;0x39
    cblock	0x45	    ; регистры для задержки
	d1
	d2
	d3
    endc		    ;0x47
temp equ  0x48		    ; временный буфффер
tmr  equ  0x49		    ; регистр состояния прерывания tmr1
    cblock	0x70 ;Регистры для сохранения контекста при обработке прерывания
	W_TEMP_
	STATUS_TEMP
	PCLATH_TEMP
	FSR_osn
	FSR_prer
    endc	   ;0x74
    
    ;Flags 00000000
    ;      ||||||||
    ;	   |||||||-----Произошла переполнения буфера (OERR)		  bit 0
    ;	   ||||||------Разрешение обрабатывать задание для прерывания     bit 1
    ;	   |||||-------Принят байт, требуется обработка			  bit 2
    ;	   ||||--------Двигатель X/Y(0/1)				  bit 3
    ;	   |||---------Оба двигателя (диагональ)			  bit 4
    ;	   ||----------Комбинация направления(мл. бит)			  bit 5
    ;	   |-----------Комбинация направления(ст. бит)			  bit 6
    ;	   ------------Выкл/Вкл лазер (0/1)				  bit 7
    ;Комбинация направления:
    ;00 - по часовой оба		 (/ снизу вверх)
    ;01 - по часовой X, Y против часовой (\ сверху вниз) 
    ;10 - X против часовой, Y по часовой (\ снизу ввверх)
    ;11 - против часовой оба		 (/сверху вниз)